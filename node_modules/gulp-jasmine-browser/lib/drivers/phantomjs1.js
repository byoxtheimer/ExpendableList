//(c) Copyright 2015 Pivotal Software, Inc. All Rights Reserved.
'use strict';

var _promise = require('babel-runtime/core-js/promise');

var _promise2 = _interopRequireDefault(_promise);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

module.exports = function () {
  return {
    get command() {
      try {
        return require('phantomjs').path;
      } catch (e) {
        return 'phantomjs';
      }
    },
    runner: 'phantom_runner.js',
    run: function run(phantomProcess) {
      return new _promise2.default(function (resolve, reject) {
        phantomProcess.once('close', function (code) {
          if (code) return reject(code);
          resolve(code);
        });
        phantomProcess.stdout.pipe(process.stdout);
        phantomProcess.stderr.pipe(process.stderr);
      });
    }
  };
};